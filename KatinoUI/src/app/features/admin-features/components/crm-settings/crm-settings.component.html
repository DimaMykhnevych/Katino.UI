<div class="main container-fluid p-3">
  <div class="table-header">
    <div class="header-content">
      <div class="header-info">
        <h2 class="table-title">
          <mat-icon class="title-icon">settings</mat-icon>
          {{ "common-components.crmSettings" | translate }}
        </h2>
      </div>
    </div>
  </div>

  <div class="mat-elevation-z8 table-wrapper np-settings p-3">
    <h2>{{ "novaPost.np" | translate }}</h2>

    <app-np-warehouse-selection
      [initialCity]="initialCity"
      [initialWarehouse]="initialWarehouse"
      (formReady)="onNpFormReady($event)"
    ></app-np-warehouse-selection>

    <div class="mt-3 d-flex gap-2">
      <button
        mat-raised-button
        color="primary"
        (click)="onSaveOrUpdate()"
        [disabled]="!canSaveOrUpdate"
      >
        <ng-container *ngIf="!isSubmitting">
          <span *ngIf="!hasSettings">{{ "common.save" | translate }}</span>
          <span *ngIf="hasSettings">{{
            "common.update" | translate
          }}</span></ng-container
        >

        <div *ngIf="isSubmitting" class="spinner-container">
          <mat-spinner diameter="20" color="accent"></mat-spinner>
          <span *ngIf="!hasSettings" class="loading-text">{{
            "common.addingButtonText" | translate
          }}</span>
          <span *ngIf="hasSettings" class="loading-text">{{
            "common.updatingButtonText" | translate
          }}</span>
        </div>
      </button>

      <button
        *ngIf="hasSettings"
        mat-stroked-button
        color="warn"
        (click)="onDelete()"
        [disabled]="isSubmitting"
      >
        {{ "common.delete" | translate }}
      </button>

      <button
        mat-button
        (click)="onReset()"
        [disabled]="!npForm || npForm.pristine || isSubmitting"
      >
        {{ "common.reset" | translate }}
      </button>
    </div>
  </div>
</div>
